{
  "mapping_items": [
    {
      "source_table": "OUTPATIENT_SERVICES",
      "target_table": "Condition_Occurrence",
      "mapping": [
        {
          "source_field": "ENROLID",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "PersonId"
        },
        {
          "source_field": "SVCDATE",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "StartDate"
        },
        {
          "source_field": "providField, STDPROV",
          "sql_field": "RTRIM(LTRIM(ISNULL(CAST(STDPROV AS VARCHAR), ''))) + ';' + RTRIM(LTRIM(ISNULL({providField}, '')))",
          "sql_alias": "ProviderIdKey",
          "target_field": "ProviderIdKey"
        }
      ],
      "lookup": [
        {
          "source_table": "OUTPATIENT_SERVICES",
          "target_table": "Condition_Occurrence",
          "fields": [
            {
              "key": "DX1",
              "defaultTypeId": "1"
            },
            {
              "key": "DX2",
              "defaultTypeId": "2"
            },
            {
              "key": "DX3",
              "defaultTypeId": "3"
            },
            {
              "key": "DX4",
              "defaultTypeId": "4"
            },
            {
              "key": "DX5",
              "defaultTypeId": "5"
            }
          ],
          "lookup": "Condition"
        }
      ],
      "condition": [
        {
          "condition": "{DXVER} = 9",
          "source_field": "DXVER, SVCDATE",
          "sql_field": "CASE WHEN DXVER NOT IN ('0', '9') THEN CASE WHEN SVCDATE &lt; '10/01/2015' THEN '9' ELSE '0' END ELSE DXVER END",
          "sql_alias": "DXVER"
        }
      ]
    },
    {
      "source_table": "OUTPATIENT_SERVICES",
      "target_table": "Condition_Occurrence",
      "mapping": [
        {
          "source_field": "ENROLID",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "PersonId"
        },
        {
          "source_field": "SVCDATE",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "StartDate"
        },
        {
          "source_field": "providField, STDPROV",
          "sql_field": "RTRIM(LTRIM(ISNULL(CAST(STDPROV AS VARCHAR), ''))) + ';' + RTRIM(LTRIM(ISNULL({providField}, '')))",
          "sql_alias": "ProviderIdKey",
          "target_field": "ProviderIdKey"
        }
      ],
      "lookup": [
        {
          "source_table": "OUTPATIENT_SERVICES",
          "target_table": "Condition_Occurrence",
          "fields": [
            {
              "key": "DX1",
              "defaultTypeId": "1"
            },
            {
              "key": "DX2",
              "defaultTypeId": "2"
            },
            {
              "key": "DX3",
              "defaultTypeId": "3"
            },
            {
              "key": "DX4",
              "defaultTypeId": "4"
            },
            {
              "key": "DX5",
              "defaultTypeId": "5"
            }
          ],
          "lookup": "Condition_icd10"
        }
      ],
      "condition": [
        {
          "condition": "{DXVER} = 0",
          "source_field": "DXVER, SVCDATE",
          "sql_field": "CASE WHEN DXVER NOT IN ('0', '9') THEN CASE WHEN SVCDATE &lt; '10/01/2015' THEN '9' ELSE '0' END ELSE DXVER END",
          "sql_alias": "DXVER"
        }
      ]
    },
    {
      "source_table": "OUTPATIENT_SERVICES",
      "target_table": "Drug_Exposure",
      "mapping": [
        {
          "source_field": "ENROLID",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "PersonId"
        },
        {
          "source_field": "SVCDATE",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "StartDate"
        },
        {
          "source_field": "SVCDATE",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "EndDate"
        }
      ],
      "lookup": [
        {
          "source_table": "OUTPATIENT_SERVICES",
          "target_table": "Condition_Occurrence",
          "fields": [
            {
              "key": "PROC1",
              "defaultTypeId": "1"
            }
          ],
          "lookup": "Drug"
        }
      ]
    },
    {
      "source_table": "OUTPATIENT_SERVICES",
      "target_table": "Procedure_Occurrence",
      "mapping": [
        {
          "source_field": "ENROLID",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "PersonId"
        },
        {
          "source_field": "SVCDATE",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "StartDate"
        },
        {
          "source_field": "TSVCDAT",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "EndDate"
        },
        {
          "source_field": "TSVCDAT",
          "sql_field": "RTRIM(LTRIM(ISNULL(CAST(STDPROV AS VARCHAR), ''))) + ';' + RTRIM(LTRIM(ISNULL({providField}, '')))",
          "sql_alias": "ProviderIdKey",
          "target_field": "ProviderIdKey"
        }
      ],
      "lookup": [
        {
          "source_table": "ENROLLMENT_DETAIL",
          "target_table": "Observation",
          "fields": [
            {
              "key": "PROC1",
              "defaultTypeId": "1",
              "isNullable": "true"
            }
          ],
          "lookup": "Procedure"
        },
        {
          "source_table": "ENROLLMENT_DETAIL",
          "target_table": "Observation",
          "fields": [
            {
              "key": "PROCMOD"
            }
          ],
          "lookup": "Modifier"
        }
      ]
    },
    {
      "source_table": "OUTPATIENT_SERVICES",
      "target_table": "Procedure_Cost",
      "mapping": [
        {
          "source_field": "COPAY",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "PaidCopay"
        },
        {
          "source_field": "COINS",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "PaidCoinsurance"
        },
        {
          "source_field": "DEDUCT",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "PaidTowardDeductible"
        },
        {
          "source_field": "NETPAY",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "PaidByPayer"
        },
        {
          "source_field": "COB",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "PaidByCoordinationBenefits"
        },
        {
          "source_field": "CurrencyConceptId",
          "sql_field": "44818668",
          "sql_alias": "CurrencyConceptId",
          "target_field": "CurrencyConceptId"
        }
      ],
      "lookup": [
        {
          "source_table": "ENROLLMENT_DETAIL",
          "target_table": "Observation",
          "fields": [
            {
              "key": "REVCODE"
            }
          ],
          "lookup": "Revenue"
        }
      ]
    },
    {
      "source_table": "OUTPATIENT_SERVICES",
      "target_table": "Visit_Occurrence",
      "mapping": [
        {
          "source_field": "ENROLID",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "PersonId"
        },
        {
          "source_field": "SVCDATE",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "StartDate"
        },
        {
          "source_field": "TSVCDAT",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "EndDate"
        },
        {
          "source_field": "TSVCDAT",
          "sql_field": "RTRIM(LTRIM(ISNULL(CAST(STDPROV AS VARCHAR), ''))) + ';' + RTRIM(LTRIM(ISNULL({providField}, '')))",
          "sql_alias": "ProviderIdKey",
          "target_field": "ProviderIdKey"
        }
      ],
      "lookup": [
        {
          "source_table": "ENROLLMENT_DETAIL",
          "target_table": "Observation",
          "fields": [
            {
              "key": "CLAIM_TYPE",
              "defaultTypeId": "44818517"
            }
          ],
          "lookup": "Visits"
        }
      ]
    },
    {
      "source_table": "OUTPATIENT_SERVICES",
      "target_table": "Death",
      "mapping": [
        {
          "source_field": "ENROLID",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "PersonId"
        },
        {
          "source_field": "SVCDATE",
          "sql_field": "",
          "sql_alias": "",
          "target_field": "StartDate"
        }
      ],
      "lookup": [
        {
          "source_table": "ENROLLMENT_DETAIL",
          "target_table": "Observation",
          "fields": [
            {
              "key": "DX1",
              "defaultTypeId": "38003567"
            },
            {
              "key": "DX2",
              "defaultTypeId": "38003567"
            },
            {
              "key": "DX3",
              "defaultTypeId": "38003567"
            },
            {
              "key": "DX4",
              "defaultTypeId": "38003567"
            },
            {
              "key": "DX5",
              "defaultTypeId": "38003567"
            }
          ],
          "lookup": "Death"
        }
      ]
    }
  ]
}