<div class="export-actions">
  <button
    mat-icon-button
    matTooltip="Download ziped mappings"
    aria-label="generate mapping xmls"
    (click)="generateMappingJson()"
  >
    <mat-icon>file_download</mat-icon>
  </button>
  <button
    mat-icon-button
    matTooltip="Preview mappings"
    aria-label="preview mapping xmls"
    (click)="previewMapping()"
  >
    <mat-icon>play_circle_filled_white</mat-icon>
  </button>
  <button
    mat-icon-button
    matTooltip="Delete all mappings"
    aria-label="delete all mappings"
    (click)="wipeAllMappings()"
  >
    <mat-icon>delete</mat-icon>
  </button>
</div>

<section *ngIf="!busy">
  <main class="main">
    <app-area area="source">
      <ng-container
        *ngFor="let table of source; trackBy: trackByFn"
      >
        <ng-container *ngIf="table.visible">
          <app-panel [table]="table">
            <app-panel-table
              [table]="table"
              [displayedColumns]="[
                'column_indicator',
                'column_name',
                'column_type',
                'values',
                'comments'
              ]"
            >
            </app-panel-table>
          </app-panel>
        </ng-container>
      </ng-container>
    </app-area>
    <!--Bridge-->
    <div class="hint">
      <div class="patch-top"></div>
      <svg class="canvas">
        <defs>
          <marker
            id="arrow"
            markerWidth="10"
            markerHeight="10"
            refX="5"
            refY="5"
            orient="auto"
            markerUnits="strokeWidth"
          >
            <path
              d="M0,0 l5,5 l-5,5"
              fill="none"
              stroke="#808080"
              stroke-width="1"
            />
          </marker>
          <marker
            id="arrow-active"
            markerWidth="10"
            markerHeight="10"
            refX="5"
            refY="5"
            orient="auto"
            markerUnits="strokeWidth"
          >
            <path
              d="M0,0 l5,5 l-5,5"
              fill="none"
              stroke="#066BBB"
              stroke-width="1"
            />
          </marker>
        </defs>
      </svg>
      <p>
        {{ hint }}
      </p>
      <div class="patch-bottom"></div>
    </div>
    <!--End-of-the-Bridge-->
    <app-area area="target">
      <ng-container
        *ngFor="let table of target; trackBy: trackByFn"
      >
        <ng-container *ngIf="table.visible">
          <app-panel [table]="table"></app-panel>
        </ng-container>
      </ng-container>
    </app-area>
  </main>
  <footer>
    <div>
      <mat-checkbox>Link similar items from other source tables</mat-checkbox>
    </div>
  </footer>
</section>
