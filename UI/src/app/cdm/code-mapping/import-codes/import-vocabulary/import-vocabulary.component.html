<div class="import">
  <div class="import__header">Please select and open .csv file to import data or edit existing vocabulary</div>

  <input #csvInput
         type="file"
         accept=".csv, xlsx, .xls"
         (change)="onFileUpload($event)"
         hidden />

  <button class="import__button" (click)="onImport()">Import CSV</button>

  <div *ngIf="vocabularies else loadingVocabulariesBlock" class="import__list">
    <div *ngFor="let vocab of vocabularies | slice: 0: visibleVocabCount; index as i" class="import__list__item">
      {{vocab.name}}

      <app-import-vocabulary-buttons (edit)="onEdit(i)"
                                     (remove)="onRemove(i)"></app-import-vocabulary-buttons>
    </div>

    <button *ngIf="vocabularies?.length > visibleVocabCount" class="import__list__show-other"
            (click)="onShowOther()">
      Select other
      <svg [class.clicked]="showOther" width="8" height="4" viewBox="0 0 8 4" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0 0L4 4L8 0H0Z" fill="#066BBB"/>
      </svg>
    </button>

    <div *ngIf="showOther" class="import__list__other">
      <div *ngFor="let vocabulary of vocabularies | slice: visibleVocabCount; index as i" class="import__list__other__item">
        {{vocabulary.name}}

        <app-import-vocabulary-buttons (edit)="onEdit(i + visibleVocabCount)"
                                       (remove)="onRemove(i + visibleVocabCount)"></app-import-vocabulary-buttons>
      </div>
    </div>
  </div>

  <ng-template #loadingVocabulariesBlock>
    <div class="import__loading">
      Loading existing vocabularies...
    </div>
  </ng-template>

  <div *ngIf="error" class="import__error">
    {{error}}
    <app-close-dialog-button class="import__error__close" (click)="onRemoveError()"></app-close-dialog-button>
  </div>

  <div *ngIf="loading" class="import__blocker">
    <mat-spinner></mat-spinner>
  </div>
</div>
